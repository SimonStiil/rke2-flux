apiVersion: v1
kind: ConfigMap
metadata:
  name: event-exporter-cfg
  namespace: monitoring
data:
  config.yaml: |
    logLevel: warn
    logFormat: json
    metricsNamePrefix: event_exporter_
    route:
      routes:
        - match:
            - receiver: "dump"
    receivers:
    
    - name: "dump"
      stdout:
        deDot: true
    - name: "es"
      elasticsearch:
        hosts:
          - ${ELASTICSEARCH_HOSTS}
        index: tpi-kube-events
        # Ca be used optionally for time based indices, accepts Go time formatting directives
        indexFormat: "tpi-kube-events-{2006-01-02}"
        username: ${ELASTICSEARCH_USERNAME} # optional
        password: ${ELASTICSEARCH_PASSWORD} # optional
        cloudID: # optional
        apiKey: # optional
        headers: # optionalï¼ŒCan be used to append the additional key/value pairs into the request headers
        # If set to true, it allows updating the same document in ES (might be useful handling count)
        useEventID: false
        # Type should be only used for clusters Version 6 and lower.
        # type: kube-event
        # If set to true, all dots in labels and annotation keys are replaced by underscores. Defaults false
        deDot: false
        layout: # Optional
        tls: # optional, advanced options for tls
          insecureSkipVerify: false # optional, if set to true, the tls cert won't be verified
          serverName: # optional, the domain, the certificate was issued for, in case it doesn't match the hostname used for the connection
          caFile: /certificates/elasticsearch/ca.crt # optional, path to the CA file of the trusted authority the cert was signed with

